{{ $limit := .Site.Params.sponsors.limit | default 5 }}
{{ $interval := .Site.Params.sponsors.interval | default 5000 }}
<div class="tk-widget-card tk-sponsors-card" data-carousel data-auto-play data-interval="{{ $interval }}" data-items-per-page="{{ $limit }}">
  <div class="tk-widget-header">
    <h3 class="tk-widget-title">
      <svg class="tk-widget-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
      赞赏清单
    </h3>
    <!-- 右上角轮播控制按钮 -->
    <div class="tk-carousel-controls">
      <button class="tk-carousel-btn tk-carousel-prev" aria-label="上一页" title="上一页">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
          <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="tk-carousel-btn tk-carousel-next" aria-label="下一页" title="下一页">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="tk-carousel-container">
    <div class="tk-carousel-wrapper" style="--items-per-page: {{ $limit }};">
      {{ if .Site.Data.sponsors }}
        {{ range .Site.Data.sponsors.sponsors }}
        <div class="tk-sponsor-item">
          <div class="tk-sponsor-info">
            <div class="tk-sponsor-name" title="{{ .name }}">
              <strong>{{ .name }}</strong>
            </div>
            {{ if .message }}
            <div class="tk-sponsor-msg" title="{{ .message }}">{{ substr .message 0 20 }}{{ if gt (len .message) 20 }}...{{ end }}</div>
            {{ end }}
          </div>
          <div class="tk-sponsor-meta">
            <div class="tk-sponsor-time">{{ .date }}</div>
            <div class="tk-sponsor-amount">￥{{ .amount }}</div>
          </div>
        </div>
        {{ end }}
        {{ if not .Site.Data.sponsors.sponsors }}
        <div class="tk-sponsor-empty">暂无赞赏记录</div>
        {{ end }}
      {{ else }}
        <div class="tk-sponsor-empty">暂无赞赏记录</div>
      {{ end }}
    </div>
  </div>
</div>
