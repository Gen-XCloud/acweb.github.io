{{/* VitePress Theme Teek 风格导航 */}}
<header class="VPNav">
  <div class="VPNavBar{{ if .IsHome }} home{{ end }}">
    <div class="wrapper">
      <div class="container">
        <div class="title">
          <div class="VPNavBarTitle">
            <a class="title" href="/">
              {{/* 桌面端头像 */}}
              {{- with .Site.Params.blogger.avatar -}}
                <img class="blogger-avatar" src="{{ . }}" alt="头像">
              {{- end -}}

              {{/* 博客名 */}}
              <span class="blogger-name">{{ .Site.Params.blogger.name | default .Site.Title }}</span>
            </a>
          </div>
        </div>

        {{/* 移动端专用顶部栏 */}}
        <div class="mobile-nav-bar">
          {{/* 头像 - 可点击回到首页 */}}
          <a class="mobile-avatar" href="/">
            {{- with .Site.Params.blogger.avatar -}}
              <img src="{{ . }}" alt="头像">
            {{- else -}}
              <div class="avatar-placeholder">{{ substr (.Site.Params.blogger.name | default .Site.Title) 0 1 }}</div>
            {{- end -}}
          </a>

          {{/* 博客名称 */}}
          <div class="mobile-blog-name">
            <span>{{ .Site.Params.blogger.name | default .Site.Title }}</span>
          </div>

          {{/* 搜索图标 */}}
          {{ if .Site.Params.search.enabled }}
            <button type="button" class="mobile-search-btn" id="mobile-search-btn" aria-label="搜索">
              <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          {{ end }}

          {{/* 时间显示 */}}
          <div class="mobile-clock" id="mobile-clock">
            <span class="clock-time">
              <span class="hour">--</span>
              <span class="separator">:</span>
              <span class="minute">--</span>
              <span class="separator">:</span>
              <span class="second">--</span>
            </span>
          </div>

          {{/* 菜单按钮 */}}
          <button class="mobile-menu-btn" id="mobile-nav-toggle" aria-label="打开菜单" aria-expanded="false" type="button">
            <svg class="icon-menu" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <svg class="icon-close" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <div class="content">
          <div class="content-body">
            {{ if .Site.Params.search.enabled }}
              <div class="VPNavBarSearch search">
                <div id="docsearch">
                  <button type="button" class="DocSearch DocSearch-Button" id="header-search-input" aria-label="搜索">
                    <span class="DocSearch-Button-Container">
                      <span class="vp-icon DocSearch-Search-Icon"></span>
                      <span class="DocSearch-Button-Placeholder">搜索</span>
                    </span>
                    <span class="DocSearch-Button-Keys">
                      <kbd class="DocSearch-Button-Key"></kbd>
                      <kbd class="DocSearch-Button-Key">K</kbd>
                    </span>
                  </button>
                </div>
              </div>
            {{ end }}

            {{/* 主导航 */}}
            <nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu">
              <span id="main-nav-aria-label" class="visually-hidden">Main Navigation</span>
              {{- $currentPage := . -}}
              {{- range .Site.Menus.main -}}
                {{- if not .Parent -}}
                  {{- $hasChildren := .HasChildren -}}
                  {{- $active := or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) -}}

                  {{- if $hasChildren -}}
                    <div class="VPFlyout VPNavBarMenuGroup{{ if $active }} active{{ end }}">
                      <button type="button" class="button" aria-haspopup="true" aria-expanded="false">
                        <span class="text">
                          <span>{{ .Name }}</span>
                          <span class="vpi-chevron-down text-icon"></span>
                        </span>
                      </button>
                      <div class="menu">
                        <div class="VPMenu">
                          <div class="items">
                            {{- range .Children -}}
                              {{- if .HasChildren -}}
                                <div class="VPMenuGroup">
                                  <p class="title">{{ .Name }}</p>
                                  {{- range .Children -}}
                                    <div class="VPMenuLink">
                                      <a class="VPLink link" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
                                        <span>{{ .Name }}</span>
                                        {{- if and .Params.description (ne .Params.description "") -}}
                                          <span class="desc">{{ .Params.description }}</span>
                                        {{- end -}}
                                      </a>
                                    </div>
                                  {{- end -}}
                                </div>
                              {{- else -}}
                                <div class="VPMenuLink">
                                  <a class="VPLink link" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
                                    <span>{{ .Name }}</span>
                                    {{- if and .Params.description (ne .Params.description "") -}}
                                      <span class="desc">{{ .Params.description }}</span>
                                    {{- end -}}
                                  </a>
                                </div>
                              {{- end -}}
                            {{- end -}}
                          </div>
                        </div>
                      </div>
                    </div>
                  {{- else -}}
                    <a class="VPLink link VPNavBarMenuLink{{ if $active }} active{{ end }}" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
                      <span>{{ .Name }}</span>
                    </a>
                  {{- end -}}
                {{- end -}}
              {{- end -}}
            </nav>

            {{/* 主题切换 */}}
            <div class="VPNavBarAppearance appearance">
              <button class="VPSwitch VPSwitchAppearance" id="theme-toggle" title="切换深色模式" type="button" role="switch" aria-label="切换深色模式" aria-checked="false">
                <span class="check">
                  <span class="icon">
                    <span class="vpi-sun sun"></span>
                    <span class="vpi-moon moon"></span>
                  </span>
                </span>
              </button>
            </div>

            {{/* 社交链接 */}}
            <div class="VPSocialLinks VPNavBarSocialLinks social-links">
              {{- with .Site.Params.socialLinks -}}
                {{- range . -}}
                  <a href="{{ .link }}"
                     class="VPSocialLink social-link"
                     target="_blank"
                     rel="noopener noreferrer"
                     aria-label="{{ .title | default .icon }}">
                    {{- if .icon -}}
                      {{- if eq .icon "github" -}}
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
                        </svg>
                      {{- else if eq .icon "gitee" -}}
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.037a.594.594 0 0 1-.592-.593v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/>
                        </svg>
                      {{- end -}}
                    {{- end -}}
                  </a>
                {{- end -}}
              {{- end -}}
              
              {{/* 配置中心入口（仅开发环境） */}}
              {{ if hugo.IsServer }}
              <a href="/settings/" class="VPSocialLink social-link" title="配置中心">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M12 1v6m0 6v6M6 12H1m6 0h6m6 0h6"/>
                  <path d="m19.07 4.93-4.24 4.24m0 5.66 4.24 4.24M4.93 4.93l4.24 4.24m0 5.66-4.24 4.24"/>
                </svg>
              </a>
              {{ end }}
            </div>

            {{/* 额外信息（时钟） */}}
            <div class="VPNavBarExtra extra">
              <div class="header-clock" id="header-clock">
                <svg class="clock-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="clock-time">
                  <span class="hour">--</span>
                  <span class="separator">:</span>
                  <span class="minute">--</span>
                  <span class="separator">:</span>
                  <span class="second">--</span>
                </span>
              </div>
            </div>

            {{/* 移动端菜单按钮 */}}
            <button class="VPNavBarHamburger hamburger" id="mobile-menu-toggle" aria-label="打开移动菜单" aria-expanded="false" type="button">
              <span class="container" tabindex="-1">
                <span class="top"></span>
                <span class="middle"></span>
                <span class="bottom"></span>
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="divider">
      <div class="divider-line"></div>
    </div>
  </div>
</header>

{{/* 移动端抽屉式导航菜单 */}}
<div class="mobile-nav-drawer" id="mobile-nav-drawer">
  <div class="mobile-nav-drawer-content">
    {{/* 导航项 */}}
    <nav class="mobile-nav-items">
      {{- $currentPage := . -}}

      {{/* 主导航菜单项（包括首页） */}}
      {{- range .Site.Menus.main -}}
        {{- if not .Parent -}}
          {{- $hasChildren := .HasChildren -}}
          {{- $active := or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) -}}

          {{- if $hasChildren -}}
            <div class="mobile-nav-group{{ if $active }} active{{ end }}">
              <button type="button" class="mobile-nav-item-toggle" data-toggle="collapse">
                {{- with .Params.icon -}}
                  <span class="item-icon">{{ . }}</span>
                {{- end -}}
                <span class="item-text">{{ .Name }}</span>
                <svg class="chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <div class="mobile-nav-submenu">
                {{- range .Children -}}
                  {{- if .HasChildren -}}
                    {{/* 二级分组 */}}
                    <div class="mobile-nav-subgroup">
                      <p class="subgroup-title">{{ .Name }}</p>
                      {{- range .Children -}}
                        <a class="mobile-nav-subitem" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
                          <span>{{ .Name }}</span>
                        </a>
                      {{- end -}}
                    </div>
                  {{- else -}}
                    <a class="mobile-nav-subitem" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
                      <span>{{ .Name }}</span>
                    </a>
                  {{- end -}}
                {{- end -}}
              </div>
            </div>
          {{- else -}}
            <a class="mobile-nav-item{{ if $active }} active{{ end }}" href="{{ .URL }}"{{ if .Params.external }} target="_blank" rel="noopener noreferrer"{{ end }}>
              {{- with .Params.icon -}}
                <span class="item-icon">{{ . }}</span>
              {{- end -}}
              <span class="item-text">{{ .Name }}</span>
            </a>
          {{- end -}}
        {{- end -}}
      {{- end -}}
    </nav>

    {{/* 底部操作栏 */}}
    <div class="mobile-nav-footer">
      {{/* 主题切换 */}}
      <button class="mobile-theme-toggle" id="mobile-theme-toggle" title="切换深色模式" type="button">
        <span class="icon sun-icon">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <g stroke="currentColor" stroke-linecap="round" stroke-width="2">
              <path fill="currentColor" fill-opacity="0" stroke-dasharray="34" stroke-dashoffset="34" d="M12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7">
                <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.4s" values="34;0"/>
                <animate fill="freeze" attributeName="fill-opacity" begin="0.9s" dur="0.5s" values="0;1"/>
              </path>
              <g fill="none" stroke-dasharray="2" stroke-dashoffset="2">
                <path d="M0 0">
                  <animate fill="freeze" attributeName="d" begin="0.5s" dur="0.2s" values="M12 19v1M19 12h1M12 5v-1M5 12h-1;M12 21v1M21 12h1M12 3v-1M3 12h-1"/>
                  <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="2;0"/>
                </path>
                <path d="M0 0">
                  <animate fill="freeze" attributeName="d" begin="0.7s" dur="0.2s" values="M17 17l0.5 0.5M17 7l0.5 -0.5M7 7l-0.5 -0.5M7 17l-0.5 0.5;M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5"/>
                  <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="2;0"/>
                </path>
                <animateTransform attributeName="transform" dur="30s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/>
              </g>
            </g>
          </svg>
        </span>
        <span class="icon moon-icon">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
              <g stroke-dasharray="2">
                <path d="M12 21v1M21 12h1M12 3v-1M3 12h-1">
                  <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.2s" values="4;2"/>
                </path>
                <path d="M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5">
                  <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.2s" dur="0.2s" values="4;2"/>
                </path>
              </g>
              <path fill="currentColor" d="M7 6 C7 12.08 11.92 17 18 17 C18.53 17 19.05 16.96 19.56 16.89 C17.95 19.36 15.17 21 12 21 C7.03 21 3 16.97 3 12 C3 8.83 4.64 6.05 7.11 4.44 C7.04 4.95 7 5.47 7 6 Z" opacity="0">
                <set attributeName="opacity" begin="0.5s" to="1"/>
              </path>
            </g>
            <g fill="currentColor" fill-opacity="0">
              <path d="m15.22 6.03l2.53-1.94L14.56 4L13.5 1l-1.06 3l-3.19.09l2.53 1.94l-.91 3.06l2.63-1.81l2.63 1.81z">
                <animate id="stars0" fill="freeze" attributeName="fill-opacity" begin="0.6s;stars0.begin+6s" dur="0.4s" values="0;1"/>
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+2.2s" dur="0.4s" values="1;0"/>
              </path>
              <path d="M13.61 5.25L15.25 4l-2.06-.05L12.5 2l-.69 1.95L9.75 4l1.64 1.25l-.59 1.98l1.7-1.17l1.7 1.17z">
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+3s" dur="0.4s" values="0;1"/>
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+5.2s" dur="0.4s" values="1;0"/>
              </path>
              <path d="M19.61 12.25L21.25 11l-2.06-.05L18.5 9l-.69 1.95l-2.06.05l1.64 1.25l-.59 1.98l1.7-1.17l1.7 1.17z">
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+0.4s" dur="0.4s" values="0;1"/>
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+2.8s" dur="0.4s" values="1;0"/>
              </path>
              <path d="m20.828 9.731l1.876-1.439l-2.366-.067L19.552 6l-.786 2.225l-2.366.067l1.876 1.439L17.601 12l1.951-1.342L21.503 12z">
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+3.4s" dur="0.4s" values="0;1"/>
                <animate fill="freeze" attributeName="fill-opacity" begin="stars0.begin+5.6s" dur="0.4s" values="1;0"/>
              </path>
            </g>
            <mask id="moon-mask">
              <circle cx="12" cy="12" r="12" fill="#fff"/>
              <circle cx="22" cy="2" r="3" fill="#fff">
                <animate fill="freeze" attributeName="cx" begin="0.1s" dur="0.4s" values="22;18"/>
                <animate fill="freeze" attributeName="cy" begin="0.1s" dur="0.4s" values="2;6"/>
                <animate fill="freeze" attributeName="r" begin="0.1s" dur="0.4s" values="3;12"/>
              </circle>
              <circle cx="22" cy="2" r="1">
                <animate fill="freeze" attributeName="cx" begin="0.1s" dur="0.4s" values="22;18"/>
                <animate fill="freeze" attributeName="cy" begin="0.1s" dur="0.4s" values="2;6"/>
                <animate fill="freeze" attributeName="r" begin="0.1s" dur="0.4s" values="1;10"/>
              </circle>
            </mask>
            <circle cx="12" cy="12" r="6" fill="currentColor" mask="url(#moon-mask)">
              <set attributeName="opacity" begin="0.5s" to="0"/>
              <animate fill="freeze" attributeName="r" begin="0.1s" dur="0.4s" values="6;10"/>
            </circle>
          </svg>
        </span>
      </button>

      {{/* 社交链接 */}}
      <div class="mobile-social-links">
        {{- with .Site.Params.socialLinks -}}
          {{- range . -}}
            <a href="{{ .link }}" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="{{ .title | default .icon }}">
              {{- if eq .icon "github" -}}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
                </svg>
              {{- else if eq .icon "gitee" -}}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.037a.594.594 0 0 1-.592-.593v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/>
                </svg>
              {{- end -}}
            </a>
          {{- end -}}
        {{- end -}}
      </div>
    </div>
  </div>
</div>

{{/* 遮罩层 */}}
<div class="mobile-nav-overlay" id="mobile-nav-overlay"></div>

